---
interface Props {
  title?: string;
  class?: string;
}

const { title = 'output', class: className = '' } = Astro.props;
---

<div class:list={['visual-panel', className]}>
  <!-- Terminal Header -->
  <div class="visual-panel__header">
    <div class="visual-panel__controls">
      <span class="visual-panel__control visual-panel__control--close"></span>
      <span class="visual-panel__control visual-panel__control--minimize"></span>
      <span class="visual-panel__control visual-panel__control--maximize"></span>
    </div>
    <div class="visual-panel__title">
      <span class="visual-panel__title-text">{title}</span>
    </div>
    <div class="visual-panel__spacer"></div>
  </div>

  <!-- Terminal Body -->
  <div class="visual-panel__body">
    <div class="visual-panel__content">
      <slot />
    </div>
  </div>

  <!-- Terminal Footer -->
  <div class="visual-panel__footer">
    <div class="visual-panel__status">
      <span class="visual-panel__status-indicator"></span>
      <span class="visual-panel__status-text">ready</span>
    </div>
  </div>
</div>

<style>
  .visual-panel {
    display: flex;
    flex-direction: column;
    height: 100%;
    background-color: var(--color-bg-secondary);
    border: 1px solid var(--color-border-primary);
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-panel);
  }

  /* Terminal Header */
  .visual-panel__header {
    display: flex;
    align-items: center;
    padding: 0.75rem 1rem;
    background-color: var(--color-bg-tertiary);
    border-bottom: 1px solid var(--color-border-secondary);
  }

  .visual-panel__controls {
    display: flex;
    gap: 0.5rem;
  }

  .visual-panel__control {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background-color: var(--color-text-muted);
    opacity: 0.5;
    transition: opacity var(--duration-fast) var(--ease-out);
  }

  .visual-panel:hover .visual-panel__control--close {
    background-color: #ff5f56;
    opacity: 1;
  }

  .visual-panel:hover .visual-panel__control--minimize {
    background-color: #ffbd2e;
    opacity: 1;
  }

  .visual-panel:hover .visual-panel__control--maximize {
    background-color: #27c93f;
    opacity: 1;
  }

  .visual-panel__title {
    flex: 1;
    text-align: center;
  }

  .visual-panel__title-text {
    font-family: var(--font-mono);
    font-size: var(--text-xs);
    color: var(--color-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.1em;
  }

  .visual-panel__spacer {
    width: 52px; /* Same as controls width for centering */
  }

  /* Terminal Body */
  .visual-panel__body {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    padding: 1.5rem;
  }

  .visual-panel__content {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-family: var(--font-mono);
    color: var(--color-text-code);
    overflow: auto;
  }

  /* Terminal Footer */
  .visual-panel__footer {
    padding: 0.5rem 1rem;
    background-color: var(--color-bg-tertiary);
    border-top: 1px solid var(--color-border-secondary);
  }

  .visual-panel__status {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .visual-panel__status-indicator {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background-color: var(--color-terminal-green);
    animation: glow-pulse 2s ease-in-out infinite;
  }

  .visual-panel__status-text {
    font-family: var(--font-mono);
    font-size: var(--text-xs);
    color: var(--color-text-muted);
  }
</style>
